<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>


	<style>
.number {
  background-color: yellow;
}

.strike {
    text-decoration: line-through !important;
    text-decoration-color: black !important;
    background-color: #CCC000;
    font-weight: bold;
    font-style: italic;
}
.mousehover{
	background-color: orange;
}

</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script>
$( document ).ready(function() {

	
// 	var param = {lastName: "Doe", firstName: "John"};
// 	$.post('https://online-tambola-4dfa8.firebaseio.com/',
//   JSON.stringify(param),
//   function () {
//     alert("success");
//   }
// );


var today = new Date();
var date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();
var time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
var dateTime = date+' '+time;

$('#ip').text("Ticket created on "+dateTime);

var array = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90];
 var i = array.length,
        j = 0,
        temp;

    while (i--) {

        j = Math.floor(Math.random() * (i+1));

        // swap randomly chosen element with current element
        temp = array[i];
        array[i] = array[j];
        array[j] = temp;

    }

    var slicedArray = array.slice(0,15);
    var sortedArray = slicedArray.sort(function(a, b){return a-b});



   //  var valie;
   //  var idFirstPart;
   //  var idSecondPart;
   //  var id;
   //  for(var i =0; i<15; i++)
   //  {
   //  	valie = sortedArray[i];
   //  	idFirstPart = Math.floor(sortedArray[i]/10)+1;
    	

   //  	idSecondPart = 'a';

   //  	id = '#'+idFirstPart+idSecondPart;

   //  	if(!$(id).hasClass('number'))
   //  	{
			// $(id).html(valie);
   //  		$(id).addClass('number');
   //  	}else{

   //  		idSecondPart = 'b';
   //  		id = '#'+idFirstPart+idSecondPart;
   //  		if(!$(id).hasClass('number'))
   //  		{
			// 	$(id).html(valie);
   //  			$(id).addClass('number');
   //  		}else{
   //  			idSecondPart = 'c';
   //  			id = '#'+idFirstPart+idSecondPart;
   //  			$(id).html(valie);
   //  			$(id).addClass('number');
   //  		}


   //  	}
   //  }

   	var pass = 0;
    var indexArray = [0,0,0,0,0,0,0,0,0];

    for(var i =0; i < 15; i++)
    {
    	indexArray[Math.floor(sortedArray[i]/10)]++;
    }
    var truecount = 0;
   for(var j=0; j< 9; j++)
   {
   		if(indexArray[j]>3)
   		{	
   			location.reload(true);
   			break;
   		}else{
   			truecount++;
   		}
   }


    for(var i = 0; i<9; i++)
    {
    	if(indexArray[i]==0)
    	{
    		//do nothing
    	}
    	else if(indexArray[i]==1)
    	{
    		var number = sortedArray[pass];
    		var idFirstPart = Math.floor(number/10)+1;
    		var idSecondPart;
    		if(Math.floor((number%10)/3)==0)
    		{
				idSecondPart = 'a';
    		}
    		else if(Math.floor((number%10)/3)==1)
    		{
    			idSecondPart = 'b';
    		}
    		else
    		{
    			idSecondPart = 'c';
    		}
    		
    		id = '#'+idFirstPart+idSecondPart;
    		$(id).html(number);
    		$(id).addClass('number');

    	}
    	else if(indexArray[i]==2)
    	{
    		var firstNumber = sortedArray[pass];
    		var secondNumber = sortedArray[pass+1];
    		var idFirstPart = Math.floor(firstNumber/10)+1;

    		if(Math.floor((firstNumber%10)/3)==0)
    		{
				idSecondPart = 'a';
    		}
    		else
    		{
    			idSecondPart = 'b';
    		}
			id = '#'+idFirstPart+idSecondPart;
    		$(id).html(firstNumber);
    		$(id).addClass('number');

    		if(idSecondPart=='b')
    		{
    		var	id2 = '#'+idFirstPart+'c';
    		$(id2).html(secondNumber);
    		$(id2).addClass('number');
    		}
    		else
    		{
    			if(Math.floor((secondNumber%10)/3)==0)
    			{
					var	id2 = '#'+idFirstPart+'b';
    				$(id2).html(secondNumber);
    				$(id2).addClass('number');
    			}
    			else
    			{
    				var	id2 = '#'+idFirstPart+'c';
    				$(id2).html(secondNumber);
    				$(id2).addClass('number');

    			}
    		}

    		//check kahan jana h ye

    	}
    	 else if(indexArray[i]==3)
    	{
    		var number1 = sortedArray[pass];
    		var number2 = sortedArray[pass+1];
    		var number3 = sortedArray[pass+2];

    		var idFirstPart = Math.floor(number1/10)+1;
    		var id = '#'+idFirstPart+'a';
    		$(id).html(number1);
    		$(id).addClass('number');

    		var id2 = '#'+idFirstPart+'b';
    		$(id2).html(number2);
    		$(id2).addClass('number');

    		var id3 = '#'+idFirstPart+'c';
    		$(id3).html(number3);
    		$(id3).addClass('number');
    	}
    	 else
    	{
    		console.log("not possible");

    	}

    	pass = pass+indexArray[i];
    } 

if(truecount==9)
{

var person = prompt("Please enter your name", "Harry Potter");
$("#nameText").text("Hi "+person+", Here is your tambola ticket");

}
$(".number").click(function() {
    //$(".number").css("background-color", "red");
    //$(this).css("background-color", "666600");
    $(this).addClass('strike');
});

$(".number").dblclick(function() {
    //$(".number").css("background-color", "red");
    //$(this).css("background-color", "666600");
    $(this).removeClass('strike');
});

$(".number").hover(function() {
    //$(".number").css("background-color", "red");
    $(this).addClass('mousehover')
    //$(this).addClass('strike');
},function() {
    //$(".number").css("background-color", "red");
    $(this).removeClass('mousehover');
    //$(this).addClass('strike');
} );

    });

</script>
</head>
<body>
<table border="2" style="width: 100%; border-collapse: collapse; border-color: #000000; border-style: solid; margin-left: auto; margin-right: auto;" cellspacing="1" height="176"><caption id="nameText"></caption>
<tbody>
<tr>
<td style="width: 11.1111%;" id = "1a"><p id="f1"></p></td>
<td style="width: 11.1111%;"  id = "2a"></td>
<td style="width: 11.1111%;"  id = "3a"></td>
<td style="width: 11.1111%;"  id = "4a"></td>
<td style="width: 11.1111%;"  id = "5a"></td>
<td style="width: 11.1111%;"  id = "6a"></td>
<td style="width: 11.1111%;"  id = "7a"></td>
<td style="width: 11.1111%;"  id = "8a"></td>
<td style="width: 11.1111%;"  id = "9a"></td>
</tr>
<tr>
<td style="width: 11.1111%;" id = "1b"></td>
<td style="width: 11.1111%;"  id = "2b"></td>
<td style="width: 11.1111%;"  id = "3b"></td>
<td style="width: 11.1111%;"  id = "4b"></td>
<td style="width: 11.1111%;"  id = "5b"></td>
<td style="width: 11.1111%;"  id = "6b"></td>
<td style="width: 11.1111%;"  id = "7b"></td>
<td style="width: 11.1111%;"  id = "8b"></td>
<td style="width: 11.1111%;"  id = "9b"></td>
</tr>
<tr>
<td style="width: 11.1111%;" id = "1c"></td>
<td style="width: 11.1111%;"  id = "2c"></td>
<td style="width: 11.1111%;"  id = "3c"></td>
<td style="width: 11.1111%;"  id = "4c"></td>
<td style="width: 11.1111%;"  id = "5c"></td>
<td style="width: 11.1111%;"  id = "6c"></td>
<td style="width: 11.1111%;"  id = "7c"></td>
<td style="width: 11.1111%;"  id = "8c"></td>
<td style="width: 11.1111%;"  id = "9c"></td>
</tr>
</tbody>
</table>
<br><br>
<H2>Rules:<H2>
	<p>1. Click on a number to mark it crossed.</p>
	<p>2. If you marked it wrongly, reset it by double clicking on number</p>
<footer id = "ip"></footer>
</body>
</html>